---
title: 下载 API
description: Paper 提供了一个下载 API，您可以使用它来访问构建
slug: misc/downloads-api
---

PaperMC 提供了一个下载 API，以便于自动化下载访问。
完整的文档可以在 [下载 API 文档](https://api.papermc.io/docs) 中找到。

:::danger

我们强烈**不推荐**在生产环境中使用不稳定的构建版本或自动更新器。

:::

:::note

以下示例需要安装 `jq`。您可以在 Debian/Ubuntu 上通过运行 `sudo apt-get install jq` 来安装它。

:::

## 获取最新版本

```shell
#!/usr/bin/env sh

PROJECT="paper"

LATEST_VERSION=$(curl -s https://api.papermc.io/v2/projects/${PROJECT} | \
    jq -r '.versions[-1]')

echo "Latest version is $LATEST_VERSION"
```

这将获取给定项目的最新可用 Minecraft 版本。

## 获取最新稳定版构建编号

```shell replace
#!/usr/bin/env sh

PROJECT="paper"
MINECRAFT_VERSION="\{LATEST_PAPER_RELEASE}"

LATEST_BUILD=$(curl -s https://api.papermc.io/v2/projects/${PROJECT}/versions/${MINECRAFT_VERSION}/builds | \
  jq '.builds | map(select(.channel == "default") | .build) | .[-1]')

if [ "$LATEST_BUILD" != "null" ]; then
  echo "最新稳定构建是 $LATEST_BUILD"
else
  echo "未找到版本 $MINECRAFT_VERSION 的稳定构建 :("
fi
```

这将获取给定项目和 Minecraft 版本的最新稳定版本，如果可用的话。

## 正在下载最新稳定版本

```shell replace
#!/usr/bin/env sh

PROJECT="paper"
MINECRAFT_VERSION="\{LATEST_PAPER_RELEASE}"

LATEST_BUILD=$(curl -s https://api.papermc.io/v2/projects/${PROJECT}/versions/${MINECRAFT_VERSION}/builds | \
  jq -r '.builds | map(select(.channel == "default") | .build) | .[-1]')

if [ "$LATEST_BUILD" != "null" ]; then
  JAR_NAME=${PROJECT}-${MINECRAFT_VERSION}-${LATEST_BUILD}.jar
  PAPERMC_URL="https://api.papermc.io/v2/projects/${PROJECT}/versions/${MINECRAFT_VERSION}/builds/${LATEST_BUILD}/downloads/${JAR_NAME}"

  # 下载最新版 Paper
  curl -o server.jar $PAPERMC_URL
  echo "下载完成"
else
  echo "未找到版本 $MINECRAFT_VERSION 的稳定版本 :("
fi
```

这是API最常见的用例。
它将下载给定项目和 Minecraft 版本的最新稳定版本。
您应该始终提供并使用稳定版本。
实验性版本容易出错且不提供支持。
