---
title: 为啥使用
description: 关于为什么你应该运行 Velocity 的说明
slug: velocity/why-velocity
---

我们相信 Velocity 是目前最好的 _Minecraft_ 代理之一，没有什么能超越它。
然而，我们在一些重要方面与更成熟、更主流的解决方案有所不同。
这可能会让 Velocity 稍微难以被接受。
我们经常被问到“为什么？”这个问题。这个页面就是我们对这个问题的回答。

## 丰富的经验

Velocity 的创始人兼主要开发者（Tux）自 2013 年以来一直积极参与开发 _Minecraft: Java Edition_ 的代理软件。
他们创建了 RedisBungee 插件，从 2014 年到 2017 年为 BungeeCord 做出贡献，
还创立了 Waterfall 项目，并从 2016 年到 2017 年领导该项目。
事实上，Waterfall 的现任维护者鼓励他们从头开始开发一个全新的代理！

## 卓越表现

Velocity 为多个热门的 Minecraft 网络提供支持，
同时使用的资源比竞争对手更少。秘诀其实很简单。

### 无实体 ID 重写

当一个 Minecraft 客户端连接到另一个 Minecraft 服务器时，服务器会返回一个唯一标识特定玩家连接的 ID。
这个 ID 用于服务器可能发送的针对该玩家的数据包中。
但如果他们实际连接的是一个可以更改玩家所连接服务器的代理时，会发生什么呢？

其他代理解决方案试图通过重写引用当前玩家的实体 ID 来解决这个问题，
将其从玩家当前连接的服务器分配的实体 ID 更改为玩家通过代理连接到第一个服务器时获得的实体 ID。
这种方法通常很复杂，会导致错误，降低性能，破坏模组，而且最终无法成为一个完整的解决方案。

然而，Minecraft 客户端实际上支持通过特殊的包序列更改其实体 ID。
Velocity 利用这一点，强制客户端更改其实体 ID。
这种方法提高了性能，提高了模组兼容性，并减少了由于不完整的实体 ID 重写导致的问题。

### 深入

Velocity 不仅优化了对 Minecraft 协议的处理，还深入到更底层。
智能处理协议可以带来惊人的性能提升，但为了获得更高的性能，我们需要深入到更底层。

我们通过提高发送给客户端的数据包的压缩速度，显著提升了性能和吞吐量。
在支持的平台上（Linux x86_64 和 aarch64），
Velocity 可以用 [libdeflate](https://github.com/ebiggers/libdeflate) 替换 zlib 库，后者实现了 Minecraft 协议中使用的压缩算法。
libdeflate 的速度是 zlib 的两倍，同时提供了类似的压缩比。

Velocity 还运用了多种技巧来争取即时编译器（JIT）的支持。
这些技巧需要对 Java 的工作原理有深入的了解，
但我们投入了大量工作来应用这些技巧，从而实现了性能的提升。

### 内部稳定性政策

最后，Velocity 并不试图在小版本和大版本之间保持稳定的内部 API。
这使得 Velocity 更具灵活性，并且能够在每次发布时都提供性能改进和新功能。
例如，Velocity 1.1.0 通过打破部分内部 API，
实现了巨大的性能改进并增加了许多重要的新功能，同时仍然与旧插件完全兼容。
相比之下，BungeeCord 在 API 破坏方面通常非常保守，当它确实进行破坏时，
往往没有提前通知，而且即使进行了破坏，也没有抓住机会对被破坏的 API 进行重大改进（例如，在 `ChatColor` 中添加 RGB 支持）。

### 控制权掌握在您手中

我们致力于将 Velocity 打造为性能卓越的代理，
但如果开箱即用的速度仍不足以满足您的需求，
您可以在 `velocity.toml` 中轻松调整多个与性能相关的设置。

## 改进的安全性

Velocity 还具备更多的安全功能，其中一些是 Velocity 独有的。
我们积极防范尽可能多的拒绝服务攻击，并为 Minecraft 1.13+ 提供了一种独特的玩家信息转发系统，
该系统要求服务器和代理知晓一个预先安排的密钥。

## 标准和模组支持

与某些仅对模组社区提供口头支持（甚至有时对模组社区表现出敌意）的平台不同，Velocity 拥抱 Minecraft 所提供的丰富性。
以一个小例子来说，我们有一个 Fabric 模组，
[有助于弥合 Velocity 本身与扩展 Minecraft 协议的模组之间的差距](https://www.curseforge.com/minecraft/mc-mods/crossstitch)，
并且支持从 1.7 到 1.12.2 以及 1.20.2 或更高版本的完整 Forge 功能。
Velocity 还支持社区中出现的标准库，例如 Kyori 的 [Adventure](https://github.com/KyoriPowered/adventure) 库。
我们与 Minecraft 模组社区展开合作。
